{
  "name": "deloachtech/zepher-symfony",
  "description": "This Zepher Symfony bundle adds RBAC, SaaS and app versioning to your application. It's released under the MIT license for public use.",
  "type": "deloachtech-package",
  "license": "MIT",
  "require": {
    "deloachtech/package-installer": "1.0.*",
    "deloachtech/zepher-php": "1.2.*"
  },
  "autoload": {
    "psr-4": {
      "DeLoachTech\\ZepherBundle\\": "src/"
    }
  },
  "extra": {
    "create": {
      "config/packages/zepher.yaml": "zepher:\n\n  # This configuration is for incorporating the Zepher object into a Symfony project.\n  # See config/zepher.json and config/zepher_dev.json for additional Zepher-specific settings.\n\n  # Quick Start\n  # See https://github.com/deloachtech/zepher-symfony/blob/master/README.md#quick-start\n\n  # IMPORTANT NOTE: The config/zepher_dev.json file for developer-specific settings. When initially\n  # installed the file grants access to everything. DO NOT DEPLOY THIS FILE TO YOUR PRODUCTION SERVER!\n\n  object_file: '%env(resolve:ZEPHER_OBJECT_FILE)%'\n\n  # The domain id of your app. This value is used when the access table is empty to\n  # create your initial app record.\n  app_domain_id: '%env(APP_DOMAIN_ID)%'\n\n  # Your application must provide the current account id and user roles.\n  # The easiest way to provide them is to set their values in the session and use a map for\n  # their key names. The DeLoachTech\\Zepher\\Security\\AccessControl class will call the get\n  # method of the SessionInterface using these values,\n  # i.e. $session->get($config['session_keys']['account_id']).\n  #\n  # Set these values early in the request lifecycle (i.e. immediately after log in).\n  session_keys:\n    account_id: account.id\n    user_roles: user.roles\n\n  # The DeLoachTech\\ZepherBundle\\Security\\AccessControlVoter uses is_granted($feature, $permission).\n  # You should use human-readable ids when creating your feature and permission assets\n  # and prefix them with a common value (e.g. FEATURE_ACCOUNT, PERMISSION_READ).\n  #\n  # When the Symfony is_granted() method is called. The AccessControlVoter will support the\n  # request when the $feature value begins with this string.\n  feature_id_prefix: FEATURE_\n\n  # Bundles may contain feature ids that are inconsistent with your Zepher settings. You can map\n  # them here to satisfy your schema.\n  feature_id_map:\n  # source: target\n\n  # Bundles may contain permission ids that are inconsistent with your Zepher settings. You can map\n  # them here to satisfy your schema.\n  permission_id_map:\n  # source: target\n",
      "config/zepher.json": "{\n  \"_readme\": [\n    \"This data is dynamically generated at app.zepher.io\",\n    \"Manual edits will be overwritten\",\n    \"See docs.zepher.io for more information\"\n  ],\n  \"data\": {\n    \"zepher\": {\n      \"object_version\": \"2.0.0\",\n      \"compile_date\": \"Tue, 17 May 2022 00:04:25 GMT\"\n    },\n    \"app\": {\n      \"id\": \"app_j18cmeithg37d5lo\",\n      \"title\": \"ZipTest\",\n      \"desc\": \"ziptest.com\",\n      \"api_key\": \"f9cf13acfc70794b89cffdc5213f957713d9d189d74cf9f3de00e24cabb00edd\",\n      \"access_version\": \"VERSION_PREMIUM\",\n      \"permission_all\": \"PERMISSION_*\"\n    },\n    \"domains\": {\n      \"DOMAIN_APP\": {\n        \"title\": \"App\",\n        \"desc\": null,\n        \"signup\": false,\n        \"signup_role\": null,\n        \"versions\": [\n          \"VERSION_APP\"\n        ],\n        \"network\": []\n      }\n    },\n    \"roles\": {\n      \"ROLE_CEO\": {\n        \"title\": \"CEO\",\n        \"desc\": \"Read access to almost everything.\"\n      },\n      \"ROLE_SUPER_USER\": {\n        \"title\": \"Super User\",\n        \"desc\": \"Has full access to all features and options.\"\n      },\n      \"ROLE_SYSTEM_ADMINISTRATOR\": {\n        \"title\": \"System Administrator\",\n        \"desc\": \"Has full access to most features and options.\"\n      },\n      \"ROLE_ACCOUNTING_CLERK\": {\n        \"title\": \"Accounting Clerk\",\n        \"desc\": \"Assistant to the Accounting Manager.\"\n      },\n      \"ROLE_ACCOUNTING_MANAGER\": {\n        \"title\": \"Accounting Manager\",\n        \"desc\": \"Manager of accounts receivable and payable.\"\n      }\n    },\n    \"access\": {\n      \"FEATURE_ACCOUNT\": {\n        \"ROLE_ACCOUNTING_CLERK\": [\n          \"PERMISSION_READ\"\n        ],\n        \"ROLE_ACCOUNTING_MANAGER\": [\n          \"PERMISSION_READ\"\n        ],\n        \"ROLE_CEO\": [\n          \"PERMISSION_READ\"\n        ],\n        \"ROLE_SYSTEM_ADMINISTRATOR\": [\n          \"PERMISSION_READ\",\n          \"PERMISSION_UPDATE\",\n          \"PERMISSION_CREATE\",\n          \"PERMISSION_READ_SENSITIVE\"\n        ],\n        \"ROLE_SUPER_USER\": [\n          \"PERMISSION_*\"\n        ]\n      },\n      \"FEATURE_APP_ACCOUNTS\": {\n        \"ROLE_SUPER_USER\": [\n          \"PERMISSION_*\"\n        ]\n      },\n      \"FEATURE_ACCESS\": {\n        \"ROLE_SYSTEM_ADMINISTRATOR\": [\n          \"PERMISSION_READ\",\n          \"PERMISSION_UPDATE\",\n          \"PERMISSION_CREATE\"\n        ],\n        \"ROLE_CEO\": [\n          \"PERMISSION_READ\"\n        ],\n        \"ROLE_SUPER_USER\": [\n          \"PERMISSION_*\"\n        ]\n      },\n      \"FEATURE_ACCOUNT_USERS\": {\n        \"ROLE_SUPER_USER\": [\n          \"PERMISSION_*\"\n        ],\n        \"ROLE_CEO\": [\n          \"PERMISSION_READ\"\n        ],\n        \"ROLE_SYSTEM_ADMINISTRATOR\": [\n          \"PERMISSION_*\"\n        ]\n      }\n    },\n    \"versions\": {\n      \"VERSION_APP\": {\n        \"tag\": \"app.1\",\n        \"title\": \"Application\",\n        \"desc\": null,\n        \"fee_process_strings\": [],\n        \"fee_desc\": null,\n        \"roles\": [\n          \"ROLE_CEO\",\n          \"ROLE_SUPER_USER\",\n          \"ROLE_SYSTEM_ADMINISTRATOR\",\n          \"ROLE_ACCOUNTING_CLERK\",\n          \"ROLE_ACCOUNTING_MANAGER\"\n        ],\n        \"features\": [\n          \"FEATURE_ACCOUNT\",\n          \"FEATURE_APP_ACCOUNTS\",\n          \"FEATURE_ACCESS\",\n          \"FEATURE_ACCOUNT_USERS\"\n        ]\n      }\n    }\n  }\n}",
      "config/zepher_dev.json": "{\n  \"_readme\": [\n    \"This file provides a means for creating a development environment.\",\n    \"Zepher will automatically load this file if it exists in the same location as the main object file.\",\n    \"\",\n    \"A simulate:domain value is required.\",\n    \"\",\n    \"The feature_access key is an array of feature:role values to add/override configured options.\",\n    \"Add new features in your zepher.json file under the version you're simulating.\",\n    \"An asterisk (*) indicates any feature/role. (e.g. *:* would grant everyone assess to everything.)\",\n    \"\",\n    \"features_add is an array of features to add to the version (* adds all)\",\n    \"\",\n    \"features_deny is an array of features to deny access (* denies all)\",\n    \"\",\n    \"There is no data persistence when this file is being used.\",\n    \"\",\n    \"DO NOT UPLOAD THIS FILE TO THE PRODUCTION ENVIRONMENT! EVERYONE WILL HAVE THIS ACCESS!\"\n  ],\n  \"simulate\": {\n    \"domain\": \"DOMAIN_APP\",\n    \"version\": \"VERSION_APP\",\n    \"role\": \"ROLE_SUPER_USER\"\n  },\n  \"features_add\": [\n    \"*\"\n  ],\n  \"feature_access\": {\n    \"*\": \"ROLE_SUPER_USER\"\n  },\n  \"features_deny\": [\n    \"FEATURE_DENY\"\n  ]\n}"
    },
    "bundle": {
      "DeLoachTech\\ZepherBundle\\ZepherBundle": "all"
    },
    "append": {
      ".env": "ZEPHER_OBJECT_FILE='%kernel.project_dir%/config/zepher.json'\nAPP_DOMAIN_ID=DOMAIN_APP"
    },
    "post-install-info": [
      "Run bin/console make:migration",
      "Run bin/console doctrine:migrations:migrate",
      "Edit config/packages/zepher.yaml as needed."
    ]
  }
}